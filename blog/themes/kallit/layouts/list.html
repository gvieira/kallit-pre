{{ define "main" }}
<div class="fixed inset-0 pointer-events-none z-0">
    <div class="absolute inset-0 bg-dots opacity-40"></div>
</div>
<main class="relative z-10 flex-1 flex flex-col items-center px-4 pt-4 pb-20 w-full max-w-7xl mx-auto">
    <div class="w-full flex flex-col items-center text-center gap-6 mb-12 lg:mb-16 max-w-4xl mx-auto">
        <h1
            class="text-5xl md:text-7xl lg:text-7xl font-display font-bold tracking-tight text-black dark:text-white leading-[1.05] mx-auto">
            <span class="relative inline-block px-3 py-3 mx-1">
                <span class="absolute inset-0 bg-primary transform -skew-y-2 rounded-lg shadow-soft-glow -z-10"></span>
                <span class="text-white relative">Building</span>
            </span>
            in public
        </h1>
        <p class="text-lg md:text-xl text-slate-600 dark:text-slate-300 font-medium leading-relaxed max-w-2xl mx-auto">
            Notes on building a public ledger for self-made claims.
            <br>
            Product decisions, tradeoffs, and things I changed my mind about.
        </p>
        <div class="w-full max-w-sm mt-8 flex flex-col items-center">
            <form class="flex flex-col gap-3 w-full">
                <div class="relative w-full">
                    <div
                        class="w-full p-1.5 bg-white dark:bg-slate-800/50 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 focus-within:ring-2 focus-within:ring-primary/20 transition-all">
                        <input
                            class="w-full bg-transparent border-none rounded-xl px-4 py-2.5 pr-36 text-base outline-none focus:ring-0 placeholder:text-slate-400 text-slate-800 dark:text-slate-100"
                            placeholder="hi@there.com" required type="email">
                    </div>
                    <button
                        class="absolute right-1.5 top-1/2 -translate-y-1/2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-200 border border-slate-200 dark:border-slate-600 font-bold text-xs px-3 py-1.5 rounded-lg shadow-none transition-all flex items-center justify-center gap-2 group whitespace-nowrap"
                        type="button">
                        <span>Follow the build</span>
                        <span
                            class="material-symbols-outlined text-sm group-hover:translate-x-0.5 transition-transform">arrow_forward</span>
                    </button>
                </div>
                <p class="text-[10px] text-slate-400 font-medium flex items-center justify-center gap-1">
                    <span class="material-symbols-outlined text-xs">lock</span>
                    No spam. Unsubscribe anytime.
                </p>
            </form>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl mx-auto mb-16">
        {{ $colors := dict "Decision" "purple" "Design" "yellow" "Tech" "blue" "Reflection" "green" }}
        {{ range (.Paginate .Pages 6).Pages }}
        {{ $category := index .Params.categories 0 | default "Protocol" }}
        {{ $color := index $colors $category | default "gray" }}
        <article
            class="bg-white dark:bg-card-dark rounded-2xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm hover:-translate-y-1 hover:shadow-xl transition-all flex flex-col group cursor-pointer h-full"
            onclick="window.location.href='{{ .RelPermalink }}'">
            <div class="flex items-center gap-2 mb-4">
                <span
                    class="px-2 py-1 rounded-md bg-{{ $color }}-100 text-{{ $color }}-700 dark:bg-{{ $color }}-900/30 dark:text-{{ $color }}-300 text-xs font-bold uppercase border border-{{ $color }}-200 dark:border-{{ $color }}-800">{{
                    $category }}</span>
                <span class="text-xs text-slate-500 font-medium">{{ .Date.Format "Jan 02, 2006" }}</span>
            </div>
            <h3
                class="text-2xl font-display font-bold text-black dark:text-white mb-3 leading-tight group-hover:text-primary transition-colors">
                {{ .Title }}
            </h3>
            <p class="text-slate-600 dark:text-slate-400 mb-6 flex-1">
                {{ if .Params.description }}
                {{ .Params.description }}
                {{ else }}
                {{ $p := findRE "<p.*?>.*?</p>" .Content 1 }}
            {{ if $p }}
            {{ index $p 0 | plainify }}
            {{ else }}
            {{ .Summary }}
            {{ end }}
            {{ end }}
            </p>
            <div class="flex items-center text-black dark:text-white font-bold text-sm mt-auto">
                Read article <span
                    class="material-symbols-outlined ml-1 text-lg group-hover:translate-x-1 transition-transform">arrow_forward</span>
            </div>
        </article>
        {{ end }}
    </div>

    {{ if gt .Paginator.TotalPages 1 }}
    <div class="w-full flex flex-col items-center gap-6 mb-20">
        <div class="flex items-center justify-center gap-3">
            {{ if .Paginator.HasPrev }}
            <a href="{{ .Paginator.Prev.URL }}"
                class="w-12 h-12 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-800 text-black dark:text-white flex items-center justify-center shadow-sm hover:shadow-md transition-all hover:-translate-y-1 hover:bg-slate-50 dark:hover:bg-slate-700 group">
                <span
                    class="material-symbols-outlined group-hover:-translate-x-0.5 transition-transform">arrow_back</span>
            </a>
            {{ else }}
            <button
                class="w-12 h-12 rounded-xl border border-slate-100 dark:border-slate-800 text-slate-300 dark:text-slate-600 flex items-center justify-center cursor-not-allowed"
                disabled>
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            {{ end }}

            {{ range .Paginator.Pagers }}
            {{ if eq . $ }}
            <button
                class="w-12 h-12 rounded-xl border border-primary bg-primary text-white font-display font-bold text-lg shadow-sm flex items-center justify-center transition-transform hover:-translate-y-1">
                {{ .PageNumber }}
            </button>
            {{ else }}
            <a href="{{ .URL }}"
                class="w-12 h-12 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-800 text-black dark:text-white font-display font-bold text-lg shadow-sm hover:shadow-md flex items-center justify-center transition-all hover:-translate-y-1 hover:bg-slate-50 dark:hover:bg-slate-700">
                {{ .PageNumber }}
            </a>
            {{ end }}
            {{ end }}

            {{ if .Paginator.HasNext }}
            <a href="{{ .Paginator.Next.URL }}"
                class="w-12 h-12 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-800 text-black dark:text-white flex items-center justify-center shadow-sm hover:shadow-md transition-all hover:-translate-y-1 hover:bg-slate-50 dark:hover:bg-slate-700 group">
                <span
                    class="material-symbols-outlined group-hover:translate-x-0.5 transition-transform">arrow_forward</span>
            </a>
            {{ else }}
            <button
                class="w-12 h-12 rounded-xl border border-slate-100 dark:border-slate-800 text-slate-300 dark:text-slate-600 flex items-center justify-center cursor-not-allowed"
                disabled>
                <span class="material-symbols-outlined">arrow_forward</span>
            </button>
            {{ end }}
        </div>
        <div class="text-sm font-semibold text-slate-500 dark:text-slate-400">
            Showing {{ .Paginator.PageNumber }} of {{ .Paginator.TotalPages }} updates
        </div>
    </div>
    {{ end }}

</main>
{{ end }}
